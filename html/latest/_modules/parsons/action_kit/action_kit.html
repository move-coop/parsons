

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>parsons.action_kit.action_kit &mdash; Parsons  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=7ab3649f" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Parsons
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Integrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../actblue.html">ActBlue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../action_kit.html">ActionKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../action_builder.html">Action Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../action_network.html">Action Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../airmeet.html">Airmeet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../airtable.html">Airtable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../alchemer.html">Alchemer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auth0.html">Auth0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aws.html">Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../azure.html">Azure: Blob Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bill_com.html">Bill.com</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bloomerang.html">Bloomerang</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../box.html">Box</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../braintree.html">Braintree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../capitolcanary.html">CapitolCanary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../census.html">Census</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../civis.html">Civis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../controlshift.html">Controlshift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../copper.html">Copper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../crowdtangle.html">CrowdTangle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../databases.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../donorbox.html">Donorbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../empower.html">Empower</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../facebook_ads.html">FacebookAds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../formstack.html">Formstack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../freshdesk.html">Freshdesk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../github.html">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../google.html">Google</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hustle.html">Hustle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mailchimp.html">Mailchimp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobilecommons.html">MobileCommons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobilize_america.html">Mobilize America</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nation_builder.html">NationBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../newmode.html">New/Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ngpvan.html">NGPVAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../p2a.html">Phone2Action</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pdi.html">PDI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickbase.html">Quickbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../redash.html">Redash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rockthevote.html">Rock the Vote</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../salesforce.html">Salesforce</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scytl.html">Scytl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sftp.html">SFTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../shopify.html">Shopify</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sisense.html">Sisense</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../targetsmart.html">TargetSmart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../turbovote.html">TurboVote</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../twilio.html">Twilio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zoom.html">Zoom</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Enhancements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../census_geocoder.html">US Census Geocoder</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Framework</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../dbsync.html">Database Sync</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../table.html">Parsons Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../notifications.html">Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../utilities.html">Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributor Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributing to Parsons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../build_a_connector.html">How to Build a Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../write_tests.html">How to Write Tests for Parsons Connectors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use Cases and Sample Scripts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../use_cases/contribute_use_cases.html">How to Contribute a Use Case &amp; Sample Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../use_cases/civis_job_status_slack_alert.html">Civis Job Status Slack Alert</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../use_cases/mysql_to_googlesheets.html">MySQL to Google Sheets Export</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Training Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../training_guides/getting_set_up.html">Getting Set Up With Parsons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../training_guides/etl_best_practices.html">Introduction to ETL Best Practices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Parsons</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">parsons.action_kit.action_kit</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for parsons.action_kit.action_kit</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">parsons.etl.table</span><span class="w"> </span><span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">parsons.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">check_env</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="ActionKit">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ActionKit</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiate the ActionKit class</span>

<span class="sd">    `Args:`</span>
<span class="sd">        domain: str</span>
<span class="sd">            The ActionKit domain (e.g. ``myorg.actionkit.com``) Not required if</span>
<span class="sd">            ``ACTION_KIT_DOMAIN`` env variable set.</span>
<span class="sd">        username: str</span>
<span class="sd">            The authorized ActionKit username. Not required if ``ACTION_KIT_USERNAME`` env</span>
<span class="sd">            variable set.</span>
<span class="sd">        password: str</span>
<span class="sd">            The authorized ActionKit user password. Not required if ``ACTION_KIT_PASSWORD``</span>
<span class="sd">            env variable set.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_default_headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;accepts&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">check_env</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;ACTION_KIT_DOMAIN&quot;</span><span class="p">,</span> <span class="n">domain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">check_env</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;ACTION_KIT_USERNAME&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">check_env</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;ACTION_KIT_PASSWORD&quot;</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_conn</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_conn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default_headers</span><span class="o">=</span><span class="n">_default_headers</span><span class="p">):</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
        <span class="n">client</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
        <span class="n">client</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">default_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">client</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_base_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">entity_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># Create the base endpoint URL</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="si">}</span><span class="s2">/rest/v1/</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/&quot;</span>

        <span class="k">if</span> <span class="n">entity_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">url</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/&quot;</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_base_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">entity_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exception_message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># Make a general get request to ActionKit</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">),</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">exception_message</span> <span class="ow">and</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_error</span><span class="p">(</span><span class="n">resp</span><span class="p">,</span> <span class="n">exception_message</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_base_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">exception_message</span><span class="p">,</span> <span class="n">return_full_json</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Make a general post request to ActionKit</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="n">endpoint</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_error</span><span class="p">(</span><span class="n">resp</span><span class="p">,</span> <span class="n">exception_message</span><span class="p">))</span>

        <span class="c1"># Some of the methods should just return pointer to location of created</span>
        <span class="c1"># object.</span>
        <span class="k">if</span> <span class="s2">&quot;headers&quot;</span> <span class="ow">in</span> <span class="n">resp</span><span class="o">.</span><span class="vm">__dict__</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">return_full_json</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">resp</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s2">&quot;headers&quot;</span><span class="p">][</span><span class="s2">&quot;Location&quot;</span><span class="p">]</span>

        <span class="c1"># Not all responses return a json</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">parse_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">,</span> <span class="n">exception_message</span><span class="p">):</span>
        <span class="c1"># AK provides some pretty robust/helpful error reporting. We should surface them with</span>
        <span class="c1"># our exceptions.</span>

        <span class="k">if</span> <span class="s2">&quot;errors&quot;</span> <span class="ow">in</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;errors&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">exception_message</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;errors&quot;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;errors&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">exception_message</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">exception_message</span>

<div class="viewcode-block" id="ActionKit.get_user">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_user">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a user.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            user_id: int</span>
<span class="sd">                The user id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            User json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">entity_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span> <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;User not found&quot;</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_user_fields">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_user_fields">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of valid user fields that can be passed with the</span>
<span class="sd">        :meth:`ActionKit.create_user` method.</span>

<span class="sd">        `Returns`:</span>
<span class="sd">            List of user fields</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;user/schema&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="ActionKit.create_user">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_user">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a user.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            email: str</span>
<span class="sd">                Email for the user</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            User json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create user&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.add_phone">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.add_phone">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_phone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">phone_type</span><span class="p">,</span> <span class="n">phone</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a phone number to a user.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            user_id: string</span>
<span class="sd">                The id of the user.</span>
<span class="sd">            phone_type: string</span>
<span class="sd">                The type of the phone (e.g., &quot;Home&quot;).</span>
<span class="sd">            phone: string</span>
<span class="sd">                The phone number.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            Phone json object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;phone&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create phone&quot;</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/rest/v1/user/</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">,</span>
            <span class="n">phone_type</span><span class="o">=</span><span class="n">phone_type</span><span class="p">,</span>
            <span class="n">phone</span><span class="o">=</span><span class="n">phone</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.delete_actionfield">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.delete_actionfield">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete_actionfield</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actionfield_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete an actionfield.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            actionfield_id: int</span>
<span class="sd">                The id of the actionfield to delete</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;actionfield&quot;</span><span class="p">,</span> <span class="n">actionfield_id</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">actionfield_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_user">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_user">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update a user.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            user_id: int</span>
<span class="sd">                The user id of the person to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``HTTP response from the patch request``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">user_id</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="ActionKit.update_phone">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_phone">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_phone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phone_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update a phone record.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            phone_id: int</span>
<span class="sd">                The phone id of the phone to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                at the /rest/v1/phone/schema/ path on any ActionKit instance.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``HTTP response from the patch request``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;phone&quot;</span><span class="p">,</span> <span class="n">phone_id</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">phone_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="ActionKit.get_event">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_event">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an event.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            event_id: int</span>
<span class="sd">                The id for the event.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            dict</span>
<span class="sd">                Event json object.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;event/</span><span class="si">{</span><span class="n">event_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_events">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_events">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get multiple events.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            limit: int</span>
<span class="sd">                The number of events to return. If omitted, all events are returned.</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>

<span class="sd">                Additionally, expressions to filter the data can also be provided. For addition</span>
<span class="sd">                info, visit `Django&#39;s docs on field lookups &lt;https://docs.djangoproject.com/\</span>
<span class="sd">                en/3.1/topics/db/queries/#field-lookups&gt;`_.</span>

<span class="sd">                .. code-block:: python</span>

<span class="sd">                    ak.get_events(name__contains=&quot;FirstName&quot;)</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            Parsons.Table</span>
<span class="sd">                The events data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">paginated_get</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_event">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_event">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an event.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            event_id: int</span>
<span class="sd">                The event id of the event to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="n">event_id</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">event_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.create_event_field">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_event_field">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_event_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an event field (custom field on an event). Note that if an event</span>
<span class="sd">        field with this name already exists, this will add a second record.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            event_id: int</span>
<span class="sd">                The id for the event.</span>
<span class="sd">            name: string</span>
<span class="sd">                The name of the event field.</span>
<span class="sd">            value: string</span>
<span class="sd">                The value of the event field.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            Event field json object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventfield&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create event field&quot;</span><span class="p">,</span>
            <span class="n">event</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/rest/v1/event/</span><span class="si">{</span><span class="n">event_id</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_event_field">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_event_field">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_event_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eventfield_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an event field.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            eventfield_id: int</span>
<span class="sd">                The id of the event field to update.</span>
<span class="sd">            name: string</span>
<span class="sd">                The name of the event field.</span>
<span class="sd">            value: string</span>
<span class="sd">                The value of the event field.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;eventfield&quot;</span><span class="p">,</span> <span class="n">eventfield_id</span><span class="p">),</span>
            <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">eventfield_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_blackholed_email">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_blackholed_email">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_blackholed_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a blackholed email. A blackholed email is an email that has been prevented from</span>
<span class="sd">        receiving bulk and transactional emails from ActionKit. `Documentation &lt;https://\</span>
<span class="sd">        docs.actionkit.com/docs/manual/guide/mailings_tools.html#blackhole&gt;`_.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            email: str</span>
<span class="sd">                Blackholed email of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            Parsons.Table</span>
<span class="sd">                The blackholed email data.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">paginated_get</span><span class="p">(</span><span class="s2">&quot;blackholedemail&quot;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.blackhole_email">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.blackhole_email">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">blackhole_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prevent an email from receiving bulk and transactional emails from ActionKit.</span>
<span class="sd">        `Documentation &lt;https://docs.actionkit.com/docs/manual/guide/\</span>
<span class="sd">        mailings_tools.html#blackhole&gt;`_.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            user_id: str</span>
<span class="sd">                Email to blackhole</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            API location of new resource</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;blackholedemail&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not blackhole email&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.delete_user_data">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.delete_user_data">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete_user_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete user data.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            email: str</span>
<span class="sd">                Email of user to delete data</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://docs.actionkit.com/docs/manual/api/\</span>
<span class="sd">                rest/users.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            API location of anonymized user</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eraser&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not delete user data&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.delete_user">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.delete_user">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a user.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            user_id: int</span>
<span class="sd">                The user id of the person to delete</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">user_id</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_campaign">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_campaign">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_campaign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">campaign_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a campaign.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            campaign_id: int</span>
<span class="sd">                The campaign id of the record.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            Campaign json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;campaign&quot;</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">campaign_id</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Campaign not found&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_campaign_fields">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_campaign_fields">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_campaign_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of valid campaign fields that can be passed with the</span>
<span class="sd">        :meth:`ActionKit.create_campaign` and :meth:`ActionKit.update_campaign` methods.</span>

<span class="sd">        `Returns`:</span>
<span class="sd">            List of campaign fields</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;campaign/schema&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="ActionKit.create_campaign">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_campaign">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_campaign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a campaign.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            name: str</span>
<span class="sd">                The name of the campaign to create</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            API location of new resource</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;campaign&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create campaign&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.search_events_in_campaign">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.search_events_in_campaign">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">search_events_in_campaign</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">campaign_id</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">order_by</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">,</span>
        <span class="n">ascdesc</span><span class="o">=</span><span class="s2">&quot;asc&quot;</span><span class="p">,</span>
        <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get events in a campaign, with optional search filters.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            campaign_id: int</span>
<span class="sd">                The id of the event campaign.</span>
<span class="sd">            limit: int</span>
<span class="sd">                The maximum number of objects to return.</span>
<span class="sd">            order_by: string</span>
<span class="sd">                Event attribute to order the results by. Defaults to id, which will normally</span>
<span class="sd">                be equivalent to ordering by created_at. See `ActionKit&#39;s docs on ordering</span>
<span class="sd">                &lt;https://roboticdogs.actionkit.com/docs//manual/api/rest/overview.html#ordering&gt;`_.</span>
<span class="sd">            ascdesc: string</span>
<span class="sd">                If &quot;asc&quot; (the default), returns events ordered by the attribute specified by</span>
<span class="sd">                the order_by parameter. If &quot;desc&quot;, returns events in reverse order.</span>
<span class="sd">            filters: dictionary</span>
<span class="sd">                A dictionary for filtering by the attributes of the event or related object.</span>
<span class="sd">                Not all attributes are available for filtering, but an eventfield will work.</span>
<span class="sd">                For additional info, visit `Django&#39;s docs on field lookups</span>
<span class="sd">                &lt;https://docs.djangoproject.com/en/3.1/topics/db/queries/#field-lookups&gt;`_ and</span>
<span class="sd">                `ActionKit&#39;s docs on the search API</span>
<span class="sd">                &lt;https://roboticdogs.actionkit.com/docs/manual/api/rest/examples/eventsearch.html&gt;`_.</span>

<span class="sd">                .. code-block:: python</span>

<span class="sd">                    {</span>
<span class="sd">                        &quot;title&quot;: &quot;Example Event Title&quot;,</span>
<span class="sd">                        &quot;field__name&quot;: &quot;example_event_field_name&quot;,</span>
<span class="sd">                        &quot;field__value&quot;: &quot;Example event field value&quot;,</span>
<span class="sd">                    }</span>
<span class="sd">            exclude: dictionary</span>
<span class="sd">                A dictionary for excluding by the attributes of the event or related object.</span>
<span class="sd">                Uses the same format as the filters argument.</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                A dictionary of other options for filtering. See `ActionKit&#39;s docs on the</span>
<span class="sd">                search API</span>
<span class="sd">                &lt;https://roboticdogs.actionkit.com/docs/manual/api/rest/examples/eventsearch.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            Parsons.Table</span>
<span class="sd">                The list of events.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">filters</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;filter[</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">exclude</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;exclude[</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">ascdesc</span> <span class="o">==</span> <span class="s2">&quot;asc&quot;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;order_by&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_by</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;order_by&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">order_by</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">paginated_get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;campaign/</span><span class="si">{</span><span class="n">campaign_id</span><span class="si">}</span><span class="s2">/event_search&quot;</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_event_create_page">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_event_create_page">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_event_create_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_create_page_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a event create page.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            event_create_page_id: int</span>
<span class="sd">                The event create page id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            Event create page json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventcreatepage&quot;</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">event_create_page_id</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Event create page not found&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_event_create_page_fields">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_event_create_page_fields">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_event_create_page_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of event create page fields that can be passed with the</span>
<span class="sd">        :meth:`ActionKit.create_event_create_page`.</span>

<span class="sd">        `Returns`:</span>
<span class="sd">            List of event create page fields</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventcreatepage/schema&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="ActionKit.create_event_create_page">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_event_create_page">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_event_create_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">campaign_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an event page to a campaign.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            campaign_id: int</span>
<span class="sd">                The campaign to assoicate page with</span>
<span class="sd">            name: str</span>
<span class="sd">                The name of the page to create</span>
<span class="sd">            title: str</span>
<span class="sd">                The title of the page to create</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            API location of new resource</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventcreatepage&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create event create page&quot;</span><span class="p">,</span>
            <span class="n">campaign</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/rest/v1/campaign/</span><span class="si">{</span><span class="n">campaign_id</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_event_create_form">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_event_create_form">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_event_create_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_create_form_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a event create form.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            event_create_form_id: int</span>
<span class="sd">                The event create form id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            Event create form json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventcreateform&quot;</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">event_create_form_id</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Event create page not found&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_event_create_form_fields">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_event_create_form_fields">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_event_create_form_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of valid event create form fields that can be passed with the</span>
<span class="sd">        :meth:`ActionKit.create_event_create_form` method.</span>

<span class="sd">        `Returns`:</span>
<span class="sd">            List of event create form fields</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventcreateform/schema&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="ActionKit.create_event_create_form">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_event_create_form">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_event_create_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_id</span><span class="p">,</span> <span class="n">thank_you_text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a event create form.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            page_id: int</span>
<span class="sd">                The page to associate the form with</span>
<span class="sd">            thank_you_text: str</span>
<span class="sd">                Free form thank you text</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            API location of new resource</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventcreateform&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not event create form&quot;</span><span class="p">,</span>
            <span class="n">page</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/rest/v1/eventcreatepage/</span><span class="si">{</span><span class="n">page_id</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">,</span>
            <span class="n">thank_you_text</span><span class="o">=</span><span class="n">thank_you_text</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_event_signup_page">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_event_signup_page">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_event_signup_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_signup_page_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get event signup page.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            event_signup_page_id: int</span>
<span class="sd">                The event signup page id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            Event signup page json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventsignuppage&quot;</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">event_signup_page_id</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;User page signup page not found&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_event_signup_page_fields">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_event_signup_page_fields">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_event_signup_page_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of valid event signup page fields that can be passed with the</span>
<span class="sd">        :meth:`ActionKit.create_event_signup_page` method.</span>

<span class="sd">        `Returns`:</span>
<span class="sd">            List of event signup page fields</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventsignuppage/schema&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="ActionKit.create_event_signup_page">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_event_signup_page">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_event_signup_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">campaign_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an event signup page to a campaign.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            campaign_id: int</span>
<span class="sd">                The campaign to assoicate page with</span>
<span class="sd">            name: str</span>
<span class="sd">                The name of the page to create</span>
<span class="sd">            title: str</span>
<span class="sd">                The title of the page to create</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            API location of new resource</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventsignuppage&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create signup page&quot;</span><span class="p">,</span>
            <span class="n">campaign</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/rest/v1/campaign/</span><span class="si">{</span><span class="n">campaign_id</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_event_signup_form">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_event_signup_form">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_event_signup_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_signup_form_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a user.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            event_signup_form_id: str</span>
<span class="sd">                The event signup form id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            Event signup form json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventsignupform&quot;</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">event_signup_form_id</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;User page signup form not found&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_event_signup_form_fields">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_event_signup_form_fields">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_event_signup_form_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of valid event signup form fields that can be passed with the</span>
<span class="sd">        :meth:`ActionKit.create_event_signup_form` method.</span>

<span class="sd">        `Returns`:</span>
<span class="sd">            List of event signup form fields</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventsignupform/schema&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="ActionKit.create_event_signup_form">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_event_signup_form">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_event_signup_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_id</span><span class="p">,</span> <span class="n">thank_you_text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a event signup form.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            page_id: int</span>
<span class="sd">                The page to associate the form with</span>
<span class="sd">            thank_you_text: str</span>
<span class="sd">                Free form thank you text</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            API location of new resource</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;eventsignupform&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not event create signup form&quot;</span><span class="p">,</span>
            <span class="n">page</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/rest/v1/page/</span><span class="si">{</span><span class="n">page_id</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">,</span>
            <span class="n">thank_you_text</span><span class="o">=</span><span class="n">thank_you_text</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_event_signup">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_event_signup">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_event_signup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_signup_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an event signup.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            event_signup_id: int</span>
<span class="sd">                The id of the event signup to update</span>
<span class="sd">            event_signup_dict: dict</span>
<span class="sd">                A dictionary of fields to update for the event signup.</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;eventsignup&quot;</span><span class="p">,</span> <span class="n">event_signup_id</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">event_signup_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_mailer">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_mailer">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_mailer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a mailer.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            entity_id: int</span>
<span class="sd">                The entity id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            Mailer json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;mailer&quot;</span><span class="p">,</span> <span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.create_mailer">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_mailer">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_mailer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a mailer.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Arguments and fields to pass to the client. A full list can be found in the</span>
<span class="sd">                `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/manual/api/\</span>
<span class="sd">                rest/mailer.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            URI of new mailer</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;mailer&quot;</span><span class="p">,</span> <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create mailer&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.copy_mailer">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.copy_mailer">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">copy_mailer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mailer_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        copy a mailer</span>
<span class="sd">        returns new copy of mailer which should be updatable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;mailer&quot;</span><span class="p">,</span> <span class="n">entity_id</span><span class="o">=</span><span class="n">mailer_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/copy&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="ActionKit.update_mailing">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_mailing">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_mailing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mailer_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update a mailing.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            mailing_id: int</span>
<span class="sd">                The id of the mailing to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``HTTP response from the patch request``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;mailer&quot;</span><span class="p">,</span> <span class="n">mailer_id</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">mailer_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="ActionKit.rebuild_mailer">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.rebuild_mailer">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rebuild_mailer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mailing_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rebuild a mailer.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            mailing_id: int</span>
<span class="sd">                Id of the mailer.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            URI to poll for progress</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;mailer/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mailing_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/rebuild&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not rebuild mailer&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.queue_mailer">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.queue_mailer">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">queue_mailer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mailing_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queue a mailer.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            mailing_id: int</span>
<span class="sd">                Id of the mailer.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            URI to poll for progress</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;mailer/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mailing_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/queue&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not queue mailer&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.paginated_get">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.paginated_get">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">paginated_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_type</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get multiple objects of a given type.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            object_type: string</span>
<span class="sd">                The type of object to search for.</span>
<span class="sd">            limit: int</span>
<span class="sd">                The number of objects to return. If omitted, all objects are returned.</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>

<span class="sd">                Additionally, expressions to filter the data can also be provided. For addition</span>
<span class="sd">                info, visit `Django&#39;s docs on field lookups &lt;https://docs.djangoproject.com/\</span>
<span class="sd">                en/3.1/topics/db/queries/#field-lookups&gt;`_.</span>

<span class="sd">                .. code-block:: python</span>

<span class="sd">                    ak.paginated_get(name__contains=&quot;FirstName&quot;)</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            Parsons.Table</span>
<span class="sd">                The objects data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># &quot;The maximum number of objects returned per request is 100. Use paging</span>
        <span class="c1"># to get more objects.&quot;</span>
        <span class="c1"># (https://roboticdogs.actionkit.com/docs//manual/api/rest/overview.html#ordering)</span>
        <span class="c1"># get only `limit` objects if it&#39;s below 100, otherwise get 100 at a time</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;_limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">limit</span> <span class="ow">or</span> <span class="mi">1_000_000_000</span><span class="p">)</span>
        <span class="n">json_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">object_type</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]</span>

        <span class="n">next_url</span> <span class="o">=</span> <span class="n">json_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;next&quot;</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">next_url</span><span class="p">:</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="si">}{</span><span class="n">next_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="p">[]))</span>
            <span class="n">next_url</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;next&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">data</span><span class="p">[:</span><span class="n">limit</span><span class="p">])</span></div>


<div class="viewcode-block" id="ActionKit.paginated_get_custom_limit">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.paginated_get_custom_limit">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">paginated_get_custom_limit</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">object_type</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">threshold_field</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">threshold_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ascdesc</span><span class="o">=</span><span class="s2">&quot;asc&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get multiple objects of a given type, stopping based on the value of a field.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            object_type: string</span>
<span class="sd">                The type of object to search for.</span>
<span class="sd">            limit: int</span>
<span class="sd">                The maximum number of objects to return. Even if the threshold</span>
<span class="sd">                value is not reached, if the limit is set, then at most this many</span>
<span class="sd">                objects will be returned.</span>
<span class="sd">            threshold_field: string</span>
<span class="sd">                The field used to determine when to stop.</span>
<span class="sd">                Must be one of the options for ordering by.</span>
<span class="sd">            threshold_value: string</span>
<span class="sd">                The value of the field to stop at.</span>
<span class="sd">            ascdesc: string</span>
<span class="sd">                If &quot;asc&quot; (the default), return all objects below the threshold value.</span>
<span class="sd">                If &quot;desc&quot;, return all objects above the threshold value.</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                You can also add expressions to filter the data beyond the limit/threshold values</span>
<span class="sd">                above. For additional info, visit `Django&#39;s docs on field lookups</span>
<span class="sd">                &lt;https://docs.djangoproject.com/en/3.1/topics/db/queries/#field-lookups&gt;`_.</span>

<span class="sd">                .. code-block:: python</span>

<span class="sd">                    ak.paginated_get(name__contains=&quot;FirstName&quot;)</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            Parsons.Table</span>
<span class="sd">                The objects data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># &quot;The maximum number of objects returned per request is 100. Use paging</span>
        <span class="c1"># to get more objects.&quot;</span>
        <span class="c1"># (https://roboticdogs.actionkit.com/docs//manual/api/rest/overview.html#ordering)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;_limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">limit</span> <span class="ow">or</span> <span class="mi">1_000_000_000</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ascdesc</span> <span class="o">==</span> <span class="s2">&quot;asc&quot;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;order_by&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">threshold_field</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;order_by&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">threshold_field</span>
        <span class="n">json_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">object_type</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]</span>
        <span class="n">next_url</span> <span class="o">=</span> <span class="n">json_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;next&quot;</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">next_url</span><span class="p">:</span>
            <span class="n">last</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">threshold_field</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ascdesc</span> <span class="o">==</span> <span class="s2">&quot;asc&quot;</span> <span class="ow">and</span> <span class="n">last</span> <span class="o">&gt;</span> <span class="n">threshold_value</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="n">ascdesc</span> <span class="o">==</span> <span class="s2">&quot;desc&quot;</span> <span class="ow">and</span> <span class="n">last</span> <span class="o">&lt;</span> <span class="n">threshold_value</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="si">}{</span><span class="n">next_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">+=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="n">next_url</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;next&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="c1"># This could be more efficient but it&#39;s still O(n) so no big deal</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># start at the end; 0-indexed means the end is length - 1</span>
        <span class="k">if</span> <span class="n">ascdesc</span> <span class="o">==</span> <span class="s2">&quot;asc&quot;</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">threshold_field</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">threshold_value</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">threshold_field</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">threshold_value</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">data</span><span class="p">[:</span><span class="n">limit</span><span class="p">])</span></div>


<div class="viewcode-block" id="ActionKit.get_order">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_order">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get an order.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            order_id: int</span>
<span class="sd">                The order id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            User json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;order&quot;</span><span class="p">,</span> <span class="n">entity_id</span><span class="o">=</span><span class="n">order_id</span><span class="p">,</span> <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Order not found&quot;</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_order">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_order">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an order.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            order_id: int</span>
<span class="sd">                The id of the order to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;order&quot;</span><span class="p">,</span> <span class="n">order_id</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">order_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_order_user_detail">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_order_user_detail">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_order_user_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_detail_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an order user detail.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            user_detail_id: int</span>
<span class="sd">                The id of the order user detail to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                at the /rest/v1/orderuserdetail/schema/ path on any ActionKit instance.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``HTTP response from the patch request``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;orderuserdetail&quot;</span><span class="p">,</span> <span class="n">user_detail_id</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">user_detail_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="ActionKit.get_orderrecurring">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_orderrecurring">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_orderrecurring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orderrecurring_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get an orderrecurring.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            orderrecurring_id: int</span>
<span class="sd">                The orderrecurring id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            User json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;orderrecurring&quot;</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">orderrecurring_id</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Orderrecurring not found&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.cancel_orderrecurring">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.cancel_orderrecurring">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">cancel_orderrecurring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recurring_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cancel a recurring order.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            recurring_id: int</span>
<span class="sd">                The id of the recurring order to update (NOT the order_id)</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;orderrecurring&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">recurring_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/cancel&quot;</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">recurring_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="ActionKit.update_orderrecurring">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_orderrecurring">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_orderrecurring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orderrecurring_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update a recurring order.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            orderrecurring_id: int</span>
<span class="sd">                The id of the orderrecurring to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;orderrecurring&quot;</span><span class="p">,</span> <span class="n">orderrecurring_id</span><span class="p">),</span>
            <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">orderrecurring_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_orders">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_orders">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get multiple orders.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            limit: int</span>
<span class="sd">                The number of orders to return. If omitted, all orders are returned.</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>

<span class="sd">                Additionally, expressions to filter the data can also be provided. For addition</span>
<span class="sd">                info, visit `Django&#39;s docs on field lookups &lt;https://docs.djangoproject.com/\</span>
<span class="sd">                en/3.1/topics/db/queries/#field-lookups&gt;`_.</span>

<span class="sd">                .. code-block:: python</span>

<span class="sd">                    ak.get_orders(import_id=&quot;my-import-123&quot;)</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            Parsons.Table</span>
<span class="sd">                The orders data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">paginated_get</span><span class="p">(</span><span class="s2">&quot;order&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_paymenttoken">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_paymenttoken">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_paymenttoken</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paymenttoken_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update a saved payment token.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            paymenttoken_id: int</span>
<span class="sd">                The id of the payment token to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``HTTP response``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;paymenttoken&quot;</span><span class="p">,</span> <span class="n">paymenttoken_id</span><span class="p">),</span>
            <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">paymenttoken_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="ActionKit.get_page_followup">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_page_followup">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_page_followup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_followup_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a page followup.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            page_followup_id: int</span>
<span class="sd">                The user id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            Page followup json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;pagefollowup&quot;</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">page_followup_id</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Page followup not found&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_page_followup_fields">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_page_followup_fields">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_page_followup_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of valid page followup fields that can be passed with the</span>
<span class="sd">        :meth:`ActionKit.create_page_followup` method.</span>

<span class="sd">        `Returns`:</span>
<span class="sd">            List of page followup fields</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;pagefollowup/schema&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="ActionKit.create_page_followup">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_page_followup">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_page_followup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signup_page_id</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a page followup.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            signup_page_id: int</span>
<span class="sd">                The signup page to associate the followup page with</span>
<span class="sd">            url: str</span>
<span class="sd">                URL of the folloup page</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            API location of new resource</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;pagefollowup&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create page followup&quot;</span><span class="p">,</span>
            <span class="n">page</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/rest/v1/eventsignuppage/</span><span class="si">{</span><span class="n">signup_page_id</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_survey_question">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_survey_question">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_survey_question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">survey_question_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a survey question.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            survey_question_id: int</span>
<span class="sd">                The survey question id of the record to get.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            Survey question json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;surveyquestion&quot;</span><span class="p">,</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="n">survey_question_id</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Survey question not found&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_survey_question">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_survey_question">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_survey_question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">survey_question_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update a survey question.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            survey_question_id: int</span>
<span class="sd">                The id of the survey question to update</span>
<span class="sd">            survey_question_dict: dict</span>
<span class="sd">                A dictionary of fields to update for the survey question.</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;surveyquestion&quot;</span><span class="p">,</span> <span class="n">survey_question_id</span><span class="p">),</span>
            <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">survey_question_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.create_transaction">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_transaction">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a transaction.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            Transaction json object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;transaction&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create transaction&quot;</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_transaction">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_transaction">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update a transaction.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            transaction_id: int</span>
<span class="sd">                The id of the transaction to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;transaction&quot;</span><span class="p">,</span> <span class="n">transaction_id</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">transaction_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.get_transactions">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.get_transactions">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_transactions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get multiple transactions.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            limit: int</span>
<span class="sd">                The number of transactions to return. If omitted, all transactions are returned.</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>

<span class="sd">                Additionally, expressions to filter the data can also be provided. For addition</span>
<span class="sd">                info, visit `Django&#39;s docs on field lookups &lt;https://docs.djangoproject.com/\</span>
<span class="sd">                en/3.1/topics/db/queries/#field-lookups&gt;`_.</span>

<span class="sd">                .. code-block:: python</span>

<span class="sd">                    ak.get_transactions(order=&quot;order-1&quot;)</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            Parsons.Table</span>
<span class="sd">                The transactions data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">paginated_get</span><span class="p">(</span><span class="s2">&quot;transaction&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.create_generic_action">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.create_generic_action">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_generic_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ak_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Post a generic action. One of ``ak_id`` or ``email`` is a required argument.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            page:</span>
<span class="sd">                The page to post the action. The page short name.</span>
<span class="sd">            email:</span>
<span class="sd">                The email address of the user to post the action.</span>
<span class="sd">            ak_id:</span>
<span class="sd">                The action kit id of the record.</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                in the `ActionKit API Documentation &lt;https://roboticdogs.actionkit.com/docs/\</span>
<span class="sd">                manual/api/rest/actionprocessing.html&gt;`_.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            dict</span>
<span class="sd">                The response json</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">email</span> <span class="ow">or</span> <span class="n">ak_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;One of email or ak_id is required.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_post</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;action&quot;</span><span class="p">,</span>
            <span class="n">exception_message</span><span class="o">=</span><span class="s2">&quot;Could not create action.&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span>
            <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span>
            <span class="n">return_full_json</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ActionKit.update_import_action">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.update_import_action">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_import_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an import action.</span>

<span class="sd">        `Args:`</span>
<span class="sd">            action_id: int</span>
<span class="sd">                The action id of the import action to update</span>
<span class="sd">            **kwargs:</span>
<span class="sd">                Optional arguments and fields to pass to the client. A full list can be found</span>
<span class="sd">                at the /rest/v1/importaction/schema/ path on any ActionKit instance.</span>
<span class="sd">        `Returns:`</span>
<span class="sd">            ``HTTP response from the patch request``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;importaction&quot;</span><span class="p">,</span> <span class="n">action_id</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">action_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="ActionKit.bulk_upload_csv">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.bulk_upload_csv">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">bulk_upload_csv</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">csv_file</span><span class="p">,</span>
        <span class="n">import_page</span><span class="p">,</span>
        <span class="n">autocreate_user_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">user_fields_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Bulk upload a csv file of new users or user updates.</span>
<span class="sd">        If you are uploading a table object, use bulk_upload_table instead.</span>
<span class="sd">        See `ActionKit User Upload Documentation &lt;https://roboticdogs.actionkit.com/docs/manual/api/rest/uploads.html&gt;`_</span>
<span class="sd">        Be careful that blank values in columns will overwrite existing data.</span>

<span class="sd">        If you get a 500 error, try sending a much smaller file (say, one row),</span>
<span class="sd">        which is more likely to return the proper 400 with a useful error message</span>

<span class="sd">        `Args:`</span>
<span class="sd">            import_page: str</span>
<span class="sd">                The page to post the action. The page short name.</span>
<span class="sd">            csv_file: str or buffer</span>
<span class="sd">                The csv (optionally zip&#39;d) file path or a file buffer object</span>
<span class="sd">                A user_id or email column is required.</span>
<span class="sd">                ActionKit rejects files that are larger than 128M</span>
<span class="sd">            autocreate_user_fields: bool</span>
<span class="sd">              When True columns starting with &quot;user_&quot; will be uploaded as user fields.</span>
<span class="sd">              See the `autocreate_user_fields documentation</span>
<span class="sd">              &lt;https://roboticdogs.actionkit.com/docs/manual/api/rest/uploads.html#create-a-multipart-post-request&gt;`_.</span>
<span class="sd">            user_fields_only: bool</span>
<span class="sd">              When uploading only an email/user_id column and user_ user fields,</span>
<span class="sd">              ActionKit has a fast processing path.</span>
<span class="sd">              This doesn&#39;t work, if you upload a zipped csv though.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            dict</span>
<span class="sd">                success: whether upload was successful</span>
<span class="sd">                progress_url: an API URL to get progress on upload processing</span>
<span class="sd">                res: requests http response object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># self.conn defaults to JSON, but this has to be form/multi-part....</span>
        <span class="n">upload_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_conn</span><span class="p">({</span><span class="s2">&quot;accepts&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">})</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_endpoint</span><span class="p">(</span><span class="s2">&quot;upload&quot;</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;upload&quot;</span><span class="p">:</span> <span class="n">csv_file</span><span class="p">}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">import_page</span><span class="p">,</span>
            <span class="s2">&quot;autocreate_user_fields&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">autocreate_user_fields</span><span class="p">),</span>
            <span class="s2">&quot;user_fields_only&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">user_fields_only</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">with</span> <span class="n">upload_client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> <span class="k">as</span> <span class="n">res</span><span class="p">:</span>
            <span class="n">progress_url</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Location&quot;</span><span class="p">)</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;res&quot;</span><span class="p">:</span> <span class="n">res</span><span class="p">,</span>
                <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="n">res</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">,</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">progress_url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="n">progress_url</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;progress_url&quot;</span><span class="p">:</span> <span class="n">progress_url</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">rv</span></div>


<div class="viewcode-block" id="ActionKit.bulk_upload_table">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.bulk_upload_table">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">bulk_upload_table</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">,</span>
        <span class="n">import_page</span><span class="p">,</span>
        <span class="n">autocreate_user_fields</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">no_overwrite_on_empty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">set_only_columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Bulk upload a table of new users or user updates.</span>
<span class="sd">        See `ActionKit User Upload Documentation &lt;https://roboticdogs.actionkit.com/docs/manual/api/rest/uploads.html&gt;`_</span>
<span class="sd">        Be careful that blank values in columns will overwrite existing data.</span>

<span class="sd">        Tables with only an identifying column (user_id/email) and user_ user fields</span>
<span class="sd">        will be fast-processed -- this is useful for setting/updating user fields.</span>

<span class="sd">        .. note::</span>
<span class="sd">            If you get a 500 error, try sending a much smaller file (say, one row),</span>
<span class="sd">            which is more likely to return the proper 400 with a useful error message</span>

<span class="sd">        `Args:`</span>
<span class="sd">            import_page: str</span>
<span class="sd">                The page to post the action. The page short name.</span>
<span class="sd">            table: Table Class</span>
<span class="sd">                A Table of user data to bulk upload</span>
<span class="sd">                A user_id or email column is required.</span>
<span class="sd">            autocreate_user_fields: bool</span>
<span class="sd">                When True columns starting with &quot;user_&quot; will be uploaded as user fields.</span>
<span class="sd">                `ActionKit &lt;https://actionkit.com/&gt;`_.</span>
<span class="sd">                See the autocreate_user_fields `documentation &lt;https://roboticdogs.actionkit.com/docs/manual/api/rest/uploads.html#create-a-multipart-post-request&gt;`_.</span>
<span class="sd">            no_overwrite_on_empty: bool</span>
<span class="sd">                When uploading user data, ActionKit will, by default, take a blank value</span>
<span class="sd">                and overwrite existing data for that user.</span>
<span class="sd">                This can be undesirable, if the goal is to only send updates.</span>
<span class="sd">                Setting this to True will divide up the table into multiple upload</span>
<span class="sd">                batches, changing the columns uploaded based on permutations of</span>
<span class="sd">                empty columns.</span>
<span class="sd">            set_only_columns: list</span>
<span class="sd">                This is similar to no_overwrite_on_empty but restricts to a specific set of columns</span>
<span class="sd">                which, if blank, should not be overwritten.</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            dict</span>
<span class="sd">                success: bool -- whether upload was successful (individual rows may not have been)</span>
<span class="sd">                results: [dict] -- This is a list of the full results.</span>
<span class="sd">                         progress_url and res for any results</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">import_page</span> <span class="o">=</span> <span class="n">check_env</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;ACTION_KIT_IMPORTPAGE&quot;</span><span class="p">,</span> <span class="n">import_page</span><span class="p">)</span>
        <span class="n">upload_tables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_split_tables_no_empties</span><span class="p">(</span>
            <span class="n">table</span><span class="p">,</span> <span class="n">no_overwrite_on_empty</span><span class="p">,</span> <span class="n">set_only_columns</span>
        <span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">tbl</span> <span class="ow">in</span> <span class="n">upload_tables</span><span class="p">:</span>
            <span class="n">user_fields_only</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">h</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">tbl</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">h</span> <span class="o">!=</span> <span class="s2">&quot;email&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">h</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;user_&quot;</span><span class="p">)])</span>
            <span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bulk_upload_csv</span><span class="p">(</span>
                    <span class="n">tbl</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(),</span>
                    <span class="n">import_page</span><span class="p">,</span>
                    <span class="n">autocreate_user_fields</span><span class="o">=</span><span class="n">autocreate_user_fields</span><span class="p">,</span>
                    <span class="n">user_fields_only</span><span class="o">=</span><span class="n">user_fields_only</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="nb">all</span><span class="p">([</span><span class="n">r</span><span class="p">[</span><span class="s2">&quot;success&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]),</span> <span class="s2">&quot;results&quot;</span><span class="p">:</span> <span class="n">results</span><span class="p">}</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_split_tables_no_empties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">no_overwrite_on_empty</span><span class="p">,</span> <span class="n">set_only_columns</span><span class="p">):</span>
        <span class="n">table_groups</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># uploading combo of user_id and email column should be mutually exclusive</span>
        <span class="n">blank_columns_test</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">columns</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">no_overwrite_on_empty</span><span class="p">:</span>
            <span class="n">blank_columns_test</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">set_only_columns</span> <span class="ow">or</span> <span class="p">[]))</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
                <span class="n">table</span><span class="o">.</span><span class="n">columns</span>
            <span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="n">blanks</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">blank_columns_test</span> <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="n">grp</span> <span class="o">=</span> <span class="n">table_groups</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">blanks</span><span class="p">,</span> <span class="p">[])</span>
            <span class="n">grp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">blanks</span><span class="p">,</span> <span class="n">subset</span> <span class="ow">in</span> <span class="n">table_groups</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">subset_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">subset</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">blanks</span><span class="p">:</span>
                <span class="n">subset_table</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">subset_table</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">cutout</span><span class="p">(</span><span class="o">*</span><span class="n">blanks</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Column Upload Blanks: </span><span class="si">{</span><span class="n">blanks</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Column Upload Columns: </span><span class="si">{</span><span class="n">subset_table</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">([</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">subset_table</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Upload will fail without user_id or email. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Rows: </span><span class="si">{</span><span class="n">subset_table</span><span class="o">.</span><span class="n">num_rows</span><span class="si">}</span><span class="s2">, Columns: </span><span class="si">{</span><span class="n">subset_table</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subset_table</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>

<div class="viewcode-block" id="ActionKit.collect_upload_errors">
<a class="viewcode-back" href="../../../action_kit.html#parsons.ActionKit.collect_upload_errors">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">collect_upload_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result_array</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Collect any upload errors as a list of objects from bulk_upload_table &#39;results&#39; key value.</span>
<span class="sd">        This waits for uploads to complete, so it may take some time if you uploaded a large file.</span>
<span class="sd">        `Args:`</span>
<span class="sd">            result_array: list</span>
<span class="sd">                After receiving a dict back from bulk_upload_table you may want to see if there</span>
<span class="sd">                were any errors in the uploads.  If you call collect_upload_errors(result_array)</span>
<span class="sd">                it will iterate across each of the uploads fetching the final result of e.g.</span>
<span class="sd">                /rest/v1/uploaderror?upload=123</span>
<span class="sd">        `Returns`:</span>
<span class="sd">            [dict]</span>
<span class="sd">                message: str -- error message</span>
<span class="sd">                upload: str -- upload progress API path e.g. &quot;/rest/v1/upload/123456/&quot;</span>
<span class="sd">                id: int -- upload error record id (different than upload id)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result_array</span><span class="p">:</span>
            <span class="n">upload_id</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">upload_id</span><span class="p">:</span>
                <span class="c1"># Pend until upload is complete</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">upload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;upload&quot;</span><span class="p">,</span> <span class="n">entity_id</span><span class="o">=</span><span class="n">upload_id</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">upload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_completed&quot;</span><span class="p">):</span>
                        <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

                <span class="c1"># ActionKit limits length of error list returned</span>
                <span class="c1"># Iterate until all errors are gathered</span>
                <span class="n">error_count</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;has_errors&quot;</span><span class="p">)</span>
                <span class="n">limit</span> <span class="o">=</span> <span class="mi">20</span>

                <span class="n">error_pages</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">error_count</span> <span class="o">/</span> <span class="n">limit</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">error_pages</span><span class="p">):</span>
                    <span class="n">error_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_get</span><span class="p">(</span>
                        <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;uploaderror&quot;</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
                            <span class="s2">&quot;upload&quot;</span><span class="p">:</span> <span class="n">upload_id</span><span class="p">,</span>
                            <span class="s2">&quot;_limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">,</span>
                            <span class="s2">&quot;_offset&quot;</span><span class="p">:</span> <span class="n">page</span> <span class="o">*</span> <span class="n">limit</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;error collect result: </span><span class="si">{</span><span class="n">error_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">error_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="p">[]))</span>

        <span class="k">return</span> <span class="n">errors</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, The Movement Cooperative.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Most Common</dt>
        <!-- Show latest & stable first -->
        
            
        
            
        
            
        
            
        
            
        
            
        
            
                  <dd><a href="action_kit.html">latest</a></dd>
            
        
            
                  <dd><a href="../../../../stable/index.html">stable</a></dd>
            
        

        <dt>By Version Number</dt>
        <!-- Show other versions -->
        
            
                  <dd><a href="../../../../v0.14.0/index.html">v0.14.0</a></dd>
            
        
            
                  <dd><a href="../../../../v0.15.0/index.html">v0.15.0</a></dd>
            
        
            
                  <dd><a href="../../../../v0.16.0/index.html">v0.16.0</a></dd>
            
        
            
                  <dd><a href="../../../../v0.17.0/index.html">v0.17.0</a></dd>
            
        
            
                  <dd><a href="../../../../v0.18.0/index.html">v0.18.0</a></dd>
            
        
            
                  <dd><a href="../../../../v0.18.1/index.html">v0.18.1</a></dd>
            
        
            
        
            
        

      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>