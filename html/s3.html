

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>S3 &mdash; Parsons 0.5 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Salesforce" href="salesforce.html" />
    <link rel="prev" title="Redshift" href="redshift.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Parsons
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Integrations</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="action_kit.html">ActionKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="airtable.html">Airtable</a></li>
<li class="toctree-l1"><a class="reference internal" href="civis.html">Civis</a></li>
<li class="toctree-l1"><a class="reference internal" href="copper.html">Copper</a></li>
<li class="toctree-l1"><a class="reference internal" href="crowdtangle.html">CrowdTangle</a></li>
<li class="toctree-l1"><a class="reference internal" href="databases.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="facebook_ads.html">FacebookAds</a></li>
<li class="toctree-l1"><a class="reference internal" href="google_sheets.html">GoogleSheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="google_cloud.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="hustle.html">Hustle</a></li>
<li class="toctree-l1"><a class="reference internal" href="mobilize_america.html">Mobilize America</a></li>
<li class="toctree-l1"><a class="reference internal" href="ngpvan.html">VAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="p2a.html">Phone2Action</a></li>
<li class="toctree-l1"><a class="reference internal" href="redshift.html">Redshift</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">S3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="salesforce.html">Salesforce</a></li>
<li class="toctree-l1"><a class="reference internal" href="sftp.html">SFTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="ts.html">TargetSmart</a></li>
<li class="toctree-l1"><a class="reference internal" href="twilio.html">Twilio</a></li>
<li class="toctree-l1"><a class="reference internal" href="turbovote.html">TurboVote</a></li>
</ul>
<p class="caption"><span class="caption-text">Enhancements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="google_civic.html">Google Civic</a></li>
<li class="toctree-l1"><a class="reference internal" href="census_geocoder.html">US Census Geocoder</a></li>
</ul>
<p class="caption"><span class="caption-text">Framework</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="table.html">Parsons Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="notifications.html">Notifications</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Parsons</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>S3</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/s3.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="s3">
<h1>S3<a class="headerlink" href="#s3" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The S3 class heavily reliant on the <code class="docutils literal notranslate"><span class="pre">boto3</span></code> python package. It includes a suite of common methods that are commonly
used with S3.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="parsons.S3">
<em class="property">class </em><code class="descclassname">parsons.</code><code class="descname">S3</code><span class="sig-paren">(</span><em>aws_access_key_id=None</em>, <em>aws_secret_access_key=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate the S3 class.</p>
<dl class="docutils">
<dt><cite>Args:</cite></dt>
<dd><dl class="first last docutils">
<dt>aws_access_key_id: str</dt>
<dd>The AWS access key id. Not required if the <code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code> env variable
is set.</dd>
<dt>aws_secret_access_key: str</dt>
<dd>The AWS secret access key. Not required if the <code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code> env
variable is set.</dd>
</dl>
</dd>
<dt><cite>Returns:</cite></dt>
<dd>S3 class.</dd>
</dl>
<dl class="attribute">
<dt id="parsons.S3.s3">
<code class="descname">s3</code><em class="property"> = None</em><a class="headerlink" href="#parsons.S3.s3" title="Permalink to this definition">¶</a></dt>
<dd><p>Boto3 API Session Resource object. Use for more advanced boto3 features.</p>
</dd></dl>

<dl class="attribute">
<dt id="parsons.S3.client">
<code class="descname">client</code><em class="property"> = None</em><a class="headerlink" href="#parsons.S3.client" title="Permalink to this definition">¶</a></dt>
<dd><p>Boto3 API Session client object. Use for more advanced boto3 features.</p>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.list_buckets">
<code class="descname">list_buckets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.list_buckets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.list_buckets" title="Permalink to this definition">¶</a></dt>
<dd><p>List all buckets to which you have access.</p>
<dl class="docutils">
<dt><cite>Returns:</cite></dt>
<dd>list</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.bucket_exists">
<code class="descname">bucket_exists</code><span class="sig-paren">(</span><em>bucket</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.bucket_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.bucket_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if a bucket exists and you have access to it.</p>
<dl class="docutils">
<dt><cite>Args:</cite></dt>
<dd><dl class="first last docutils">
<dt>bucket: str</dt>
<dd>The bucket name</dd>
</dl>
</dd>
<dt><cite>Returns:</cite></dt>
<dd><dl class="first last docutils">
<dt>boolean</dt>
<dd><code class="docutils literal notranslate"><span class="pre">True</span></code> if the bucket exists and <code class="docutils literal notranslate"><span class="pre">False</span></code> if not.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.list_keys">
<code class="descname">list_keys</code><span class="sig-paren">(</span><em>bucket</em>, <em>prefix=None</em>, <em>suffix=None</em>, <em>regex=None</em>, <em>date_modified_before=None</em>, <em>date_modified_after=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.list_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.list_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>List the keys in a bucket, along with extra info about each one.</p>
<dl class="docutils">
<dt><cite>Args:</cite></dt>
<dd><dl class="first last docutils">
<dt>bucket: str</dt>
<dd>The bucket name</dd>
<dt>prefix: str</dt>
<dd>Limits the response to keys that begin with the specified prefix.</dd>
<dt>suffix: str</dt>
<dd>Limits the response to keys that end with specified suffix</dd>
<dt>regex: str</dt>
<dd>Limits the reponse to keys that match a regex pattern</dd>
<dt>date_modified_before: datetime.datetime</dt>
<dd>Limits the response to keys with date modified before</dd>
<dt>date_modified_after: datetime.datetime</dt>
<dd>Limits the response to keys with date modified after</dd>
</dl>
</dd>
<dt><cite>Returns:</cite></dt>
<dd><dl class="first last docutils">
<dt>dict</dt>
<dd>Dict mapping the keys to info about each key. The info includes ‘LastModified’,
‘Size’, and ‘Owner’.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.key_exists">
<code class="descname">key_exists</code><span class="sig-paren">(</span><em>bucket</em>, <em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.key_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.key_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if a key exists in a bucket.</p>
<dl class="docutils">
<dt><cite>Args:</cite></dt>
<dd><dl class="first last docutils">
<dt>bucket: str</dt>
<dd>The bucket name</dd>
<dt>key: str</dt>
<dd>The object key</dd>
</dl>
</dd>
<dt><cite>Returns:</cite></dt>
<dd><dl class="first last docutils">
<dt>boolean</dt>
<dd><code class="docutils literal notranslate"><span class="pre">True</span></code> if key exists and <code class="docutils literal notranslate"><span class="pre">False</span></code> if not.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.create_bucket">
<code class="descname">create_bucket</code><span class="sig-paren">(</span><em>bucket</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.create_bucket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.create_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an s3 bucket.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">S3 has a limit on the number of buckets you can create in an AWS account, and
that limit is fairly low (typically 100). If you are creating buckets frequently,
you may be mis-using S3, and should consider using the same bucket for multiple tasks.
There is no limit on the number of objects in a bucket.
See <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html">AWS bucket restrictions</a> for more
info.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">S3 bucket names are <em>globally</em> unique. So when creating a new bucket,
the name can’t collide with any existing bucket names. If the provided name does
collide, you’ll see errors like <cite>IllegalLocationConstraintException</cite> or
<cite>BucketAlreadyExists</cite>.</p>
</div>
<dl class="docutils">
<dt><cite>Args:</cite></dt>
<dd><dl class="first last docutils">
<dt>bucket: str</dt>
<dd>The name of the bucket to create</dd>
</dl>
</dd>
<dt><cite>Returns:</cite></dt>
<dd><code class="docutils literal notranslate"><span class="pre">None</span></code></dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.put_file">
<code class="descname">put_file</code><span class="sig-paren">(</span><em>bucket</em>, <em>key</em>, <em>local_path</em>, <em>acl='bucket-owner-full-control'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.put_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.put_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Uploads an object to an S3 bucket</p>
<dl class="docutils">
<dt><cite>Args:</cite></dt>
<dd><dl class="first last docutils">
<dt>bucket: str</dt>
<dd>The bucket name</dd>
<dt>key: str</dt>
<dd>The object key</dd>
<dt>local_path: str</dt>
<dd>The local path of the file to upload</dd>
<dt>acl: str</dt>
<dd>The S3 permissions on the file</dd>
<dt>kwargs:</dt>
<dd>Additional arguments for the S3 API call. See <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html">AWS Put Object documentation</a> for more
info.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.remove_file">
<code class="descname">remove_file</code><span class="sig-paren">(</span><em>bucket</em>, <em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.remove_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.remove_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes an object from an S3 bucket</p>
<dl class="docutils">
<dt><cite>Args:</cite></dt>
<dd><dl class="first last docutils">
<dt>bucket: str</dt>
<dd>The bucket name</dd>
<dt>key: str</dt>
<dd>The object key</dd>
</dl>
</dd>
<dt><cite>Returns:</cite></dt>
<dd><code class="docutils literal notranslate"><span class="pre">None</span></code></dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.get_file">
<code class="descname">get_file</code><span class="sig-paren">(</span><em>bucket</em>, <em>key</em>, <em>local_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.get_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.get_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Download an object from S3 to a local file</p>
<dl class="docutils">
<dt><cite>Args:</cite></dt>
<dd><dl class="first last docutils">
<dt>local_path: str</dt>
<dd>The local path where the file will be downloaded. If not specified, a temporary
file will be created and returned, and that file will be removed automatically
when the script is done running.</dd>
<dt>bucket: str</dt>
<dd>The bucket name</dd>
<dt>key: str</dt>
<dd>The object key</dd>
</dl>
</dd>
<dt><cite>Returns:</cite></dt>
<dd><dl class="first last docutils">
<dt>str</dt>
<dd>The path of the new file</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.get_url">
<code class="descname">get_url</code><span class="sig-paren">(</span><em>bucket</em>, <em>key</em>, <em>expires_in=3600</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.get_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.get_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a presigned url for an s3 object.</p>
<dl class="docutils">
<dt><cite>Args:</cite></dt>
<dd><dl class="first last docutils">
<dt>bucket: str</dt>
<dd>The bucket name</dd>
<dt>key: str</dt>
<dd>The object name</dd>
<dt>expires_in: int</dt>
<dd>The time, in seconds, until the url expires</dd>
</dl>
</dd>
<dt><cite>Returns:</cite></dt>
<dd><dl class="first last docutils">
<dt>Url:</dt>
<dd>A link to download the object</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parsons.S3.transfer_bucket">
<code class="descname">transfer_bucket</code><span class="sig-paren">(</span><em>origin_bucket</em>, <em>origin_key</em>, <em>destination_bucket</em>, <em>destination_key=None</em>, <em>suffix=None</em>, <em>regex=None</em>, <em>date_modified_before=None</em>, <em>date_modified_after=None</em>, <em>public_read=False</em>, <em>remove_original=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/parsons/aws/s3.html#S3.transfer_bucket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#parsons.S3.transfer_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfer files between s3 buckets
<cite>Args:</cite></p>
<blockquote>
<div><dl class="docutils">
<dt>origin_bucket: str</dt>
<dd>The origin bucket</dd>
<dt>origin_key: str</dt>
<dd>The origin file or prefix</dd>
<dt>destination_bucket: str</dt>
<dd>The destination bucket</dd>
<dt>destination_key: str</dt>
<dd>If <cite>None</cite> then will retain the <cite>origin key</cite>. If set to prefix will move all
to new prefix</dd>
<dt>suffix: str</dt>
<dd>Limits the response to keys that end with specified suffix</dd>
<dt>regex: str</dt>
<dd>Limits the reponse to keys that match a regex pattern</dd>
<dt>date_modified_before: datetime.datetime</dt>
<dd>Limits the response to keys with date modified before</dd>
<dt>date_modified_after: datetime.datetime</dt>
<dd>Limits the response to keys with date modified after</dd>
<dt>public_read: bool</dt>
<dd>If the keys should be set to <cite>public-read</cite></dd>
<dt>remove_original: bool</dt>
<dd>If the original keys should be removed after transfer</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt><cite>Returns:</cite></dt>
<dd><code class="docutils literal notranslate"><span class="pre">None</span></code></dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="salesforce.html" class="btn btn-neutral float-right" title="Salesforce" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="redshift.html" class="btn btn-neutral" title="Redshift" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, The Movement Cooperative

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>