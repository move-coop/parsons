

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L2YB7WHTRG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-L2YB7WHTRG');
    </script>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NGPVAN &mdash; Parsons  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Phone2Action" href="p2a.html" />
    <link rel="prev" title="New/Mode" href="newmode.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Parsons
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Integrations</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="actblue.html">ActBlue</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_kit.html">ActionKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_builder.html">Action Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_network.html">Action Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="airmeet.html">Airmeet</a></li>
<li class="toctree-l1"><a class="reference internal" href="airtable.html">Airtable</a></li>
<li class="toctree-l1"><a class="reference internal" href="alchemer.html">Alchemer</a></li>
<li class="toctree-l1"><a class="reference internal" href="auth0.html">Auth0</a></li>
<li class="toctree-l1"><a class="reference internal" href="aws.html">Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.html">Azure: Blob Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="bill_com.html">Bill.com</a></li>
<li class="toctree-l1"><a class="reference internal" href="bloomerang.html">Bloomerang</a></li>
<li class="toctree-l1"><a class="reference internal" href="box.html">Box</a></li>
<li class="toctree-l1"><a class="reference internal" href="braintree.html">Braintree</a></li>
<li class="toctree-l1"><a class="reference internal" href="capitolcanary.html">CapitolCanary</a></li>
<li class="toctree-l1"><a class="reference internal" href="census.html">Census</a></li>
<li class="toctree-l1"><a class="reference internal" href="civis.html">Civis</a></li>
<li class="toctree-l1"><a class="reference internal" href="controlshift.html">Controlshift</a></li>
<li class="toctree-l1"><a class="reference internal" href="copper.html">Copper</a></li>
<li class="toctree-l1"><a class="reference internal" href="crowdtangle.html">CrowdTangle</a></li>
<li class="toctree-l1"><a class="reference internal" href="databases.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="donorbox.html">Donorbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="empower.html">Empower</a></li>
<li class="toctree-l1"><a class="reference internal" href="facebook_ads.html">FacebookAds</a></li>
<li class="toctree-l1"><a class="reference internal" href="formstack.html">Formstack</a></li>
<li class="toctree-l1"><a class="reference internal" href="freshdesk.html">Freshdesk</a></li>
<li class="toctree-l1"><a class="reference internal" href="github.html">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="google.html">Google</a></li>
<li class="toctree-l1"><a class="reference internal" href="hustle.html">Hustle</a></li>
<li class="toctree-l1"><a class="reference internal" href="mailchimp.html">Mailchimp</a></li>
<li class="toctree-l1"><a class="reference internal" href="mobilecommons.html">MobileCommons</a></li>
<li class="toctree-l1"><a class="reference internal" href="mobilize_america.html">Mobilize America</a></li>
<li class="toctree-l1"><a class="reference internal" href="nation_builder.html">NationBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="newmode.html">New/Mode</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NGPVAN</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quickstart">QuickStart</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-workflows">Common Workflows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bulk-import">Bulk Import</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scores-loading-and-updating">Scores: Loading and Updating</a></li>
<li class="toctree-l3"><a class="reference internal" href="#people-add-survey-response">People: Add Survey Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="#event-creating-and-modifying">Event: Creating and Modifying</a></li>
<li class="toctree-l3"><a class="reference internal" href="#signup-adding-and-modifying">Signup: Adding and Modifying</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#people">People</a></li>
<li class="toctree-l3"><a class="reference internal" href="#activist-codes">Activist Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Bulk Import</a></li>
<li class="toctree-l3"><a class="reference internal" href="#canvass-responses">Canvass Responses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changed-entities">Changed Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#codes">Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contact-notes">Contact Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-fields">Custom Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#email">Email</a></li>
<li class="toctree-l3"><a class="reference internal" href="#events">Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-jobs">Export Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-loading-jobs">File Loading Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#folders">Folders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#locations">Locations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#printed-lists">Printed Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="#saved-lists">Saved Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scores">Scores</a></li>
<li class="toctree-l3"><a class="reference internal" href="#signups">Signups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supporter-groups">Supporter Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#survey-questions">Survey Questions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#targets">Targets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="p2a.html">Phone2Action</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdi.html">PDI</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickbase.html">Quickbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickbooks.html">Quickbooks Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="redash.html">Redash</a></li>
<li class="toctree-l1"><a class="reference internal" href="rockthevote.html">Rock the Vote</a></li>
<li class="toctree-l1"><a class="reference internal" href="salesforce.html">Salesforce</a></li>
<li class="toctree-l1"><a class="reference internal" href="scytl.html">Scytl</a></li>
<li class="toctree-l1"><a class="reference internal" href="sftp.html">SFTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="shopify.html">Shopify</a></li>
<li class="toctree-l1"><a class="reference internal" href="sisense.html">Sisense</a></li>
<li class="toctree-l1"><a class="reference internal" href="targetsmart.html">TargetSmart</a></li>
<li class="toctree-l1"><a class="reference internal" href="turbovote.html">TurboVote</a></li>
<li class="toctree-l1"><a class="reference internal" href="twilio.html">Twilio</a></li>
<li class="toctree-l1"><a class="reference internal" href="zoom.html">Zoom</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Enhancements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="census_geocoder.html">US Census Geocoder</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Framework</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dbsync.html">Database Sync</a></li>
<li class="toctree-l1"><a class="reference internal" href="table.html">Parsons Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="notifications.html">Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributor Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to Parsons</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_a_connector.html">How to Build a Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="write_tests.html">How to Write Tests for Parsons Connectors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use Cases and Sample Scripts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="use_cases/contribute_use_cases.html">How to Contribute a Use Case &amp; Sample Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_cases/civis_job_status_slack_alert.html">Civis Job Status Slack Alert</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_cases/mysql_to_googlesheets.html">MySQL to Google Sheets Export</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Training Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="training_guides/getting_set_up.html">Getting Set Up With Parsons</a></li>
<li class="toctree-l1"><a class="reference internal" href="training_guides/etl_best_practices.html">Introduction to ETL Best Practices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Parsons</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">NGPVAN</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/ngpvan.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ngpvan">
<h1>NGPVAN<a class="headerlink" href="#ngpvan" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The VAN module leverages the VAN API and generally follows the naming convention of their API endpoints. It
is recommended that you reference their <a class="reference external" href="https://docs.ngpvan.com/reference/overview">API documentation</a> for
additional details and information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>API Keys</dt><dd><ul class="simple">
<li><p>API Keys are specific to each committee and state.</p></li>
<li><p>There was once a Parsons type API Key that could be requested via the VAN Integrations menu,
but that key type has been deprecated by NGPVAN. API keys should now be requested as a custom
integration. For additional guidance, refer to the Parsons Slack or reach out to
&lt;<a class="reference external" href="mailto:parsons&#37;&#52;&#48;movementcooperative&#46;org">parsons<span>&#64;</span>movementcooperative<span>&#46;</span>org</a>&gt;.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<dl class="simple">
<dt>VANIDs</dt><dd><p>VANIDs are unique to each state and instance of the VAN. VANIDs used for the AV VAN <strong>will not</strong> match
those of the SmartVAN or VoteBuilder.</p>
</dd>
<dt>Maintenance &amp; Support</dt><dd><p>VAN/EveryAction is not responsible for support of Parsons. Their support team cannot answer questions
about Parsons. Please direct any questions to the Parsons team via the issue tracker or Slack.</p>
</dd>
</dl>
</div>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="quickstart">
<h2>QuickStart<a class="headerlink" href="#quickstart" title="Link to this heading"></a></h2>
<p>To call the VAN class you can either store the api key as an environmental variable VAN_API_KEY or pass it in as an argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span>

 <span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;MyVoters&#39;</span><span class="p">)</span> <span class="c1"># Specify the DB type and pass api key via environmental variable.</span>

 <span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;asdfa-sdfadsf-adsfasdf&#39;</span><span class="p">,</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;MyVoters&#39;</span><span class="p">)</span> <span class="c1"># Pass api key directly</span>
</pre></div>
</div>
<p>You can then call various endpoints:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span>

 <span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;MyVoters&#39;</span><span class="p">)</span>

 <span class="c1"># List events with a date filter</span>
 <span class="n">events</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">get_events</span><span class="p">(</span><span class="n">starting_before</span><span class="o">=</span><span class="s1">&#39;2018-02-01&#39;</span><span class="p">)</span>

 <span class="c1"># List all folders shared with API Key User</span>
 <span class="n">folders</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">get_folders</span><span class="p">()</span>

 <span class="c1"># Return to a Redshift database</span>
 <span class="n">saved_lists</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">get_saved_lists</span><span class="p">()</span><span class="o">.</span><span class="n">to_redshift</span><span class="p">(</span><span class="s1">&#39;van.my_saved_lists&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This a is just a small sampling of all of the VAN endpoints that you can leverage. We recommend reviewing the
documentation for all functions.</p>
</section>
<section id="common-workflows">
<h2>Common Workflows<a class="headerlink" href="#common-workflows" title="Link to this heading"></a></h2>
<section id="bulk-import">
<h3>Bulk Import<a class="headerlink" href="#bulk-import" title="Link to this heading"></a></h3>
<p>For some methods, VAN allows you to bulk import multiple records to create or modify them.</p>
<p>The bulk upload endpoint requires access to files on the public internet as it runs the upload
asynchronously. Therefore, in order to bulk import, you must pass in cloud storage credentials
(either AWS S3 or Google Cloud Storage) so that the file can be posted.</p>
<p><strong>Bulk Apply Activist Codes</strong></p>
<p>In this example we are applying activist codes to a list of contacts. The csv file would
have the following columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vanid</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">activistcodeid</span></code></p></li>
</ul>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span><span class="p">,</span> <span class="n">Table</span>

<span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;EveryAction&#39;</span><span class="p">)</span>

<span class="c1"># Load a table containing the VANID, activistcodeid and other options.</span>
<span class="n">tbl</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_csv</span><span class="p">(</span><span class="s1">&#39;new_volunteers.csv&#39;</span><span class="p">)</span>

<span class="c1"># Table will be sent to S3 bucket and a POST request will be made to VAN creating</span>
<span class="c1"># the bulk import job with all of the valid meta information. The method will</span>
<span class="c1"># return the job id.</span>
<span class="n">job_id</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">bulk_apply_activist_codes</span><span class="p">(</span><span class="n">tbl</span><span class="p">,</span> <span class="n">url_type</span><span class="o">=</span><span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s1">&#39;my_bucket&#39;</span><span class="p">)</span>

<span class="c1"># The bulk import job is run asynchronously, so you may poll the status of a job.</span>
<span class="n">job_status</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">get_bulk_import_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</pre></div>
</div>
<p>** Bulk Upsert Contacts**
In this example we are creating and updating emails and addresses. The csv file would
have the following columns:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vanid</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">first_name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">last_name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">city</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">state</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zip</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">email</span></code></p></li>
</ul>
<p>Note that <code class="docutils literal notranslate"><span class="pre">vanid</span></code> must be the first column in your table. For additional fields, see the
<code class="xref py py-func docutils literal notranslate"><span class="pre">bulk_upsert_contacts()</span></code> documentation.</p>
<p>If a record contains a null value, it will not be updated.</p>
<p>If the VANID record is null, then a new record will be created.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span><span class="p">,</span> <span class="n">Table</span>

<span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="n">EveryAction</span><span class="p">)</span>

<span class="c1"># Load a table containing VANID and PII columns</span>
<span class="n">tbl</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_csv</span><span class="p">(</span><span class="s1">&#39;hot_leads.csv&#39;</span><span class="p">)</span>

<span class="c1"># Table will be sent to S3 bucket and a POST request will be made to VAN creating</span>
<span class="c1"># the bulk import job with all of the valid meta information. The method will</span>
<span class="c1"># return the job id.</span>
<span class="n">job_id</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">bulk_upsert_contacts</span><span class="p">(</span><span class="n">tbl</span><span class="p">,</span> <span class="n">url_type</span><span class="o">=</span><span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s1">&#39;my_bucket&#39;</span><span class="p">)</span>

<span class="c1"># The bulk import job is run asynchronously, so you may poll the status of a job.</span>
<span class="n">job_status</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">get_bulk_import_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>

<span class="c1"># When the job is complete, get the results of the job. This file will include newly</span>
<span class="c1"># created vanids.</span>
<span class="n">job_results</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">get_bulk_import_job_results</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Upload Saved List</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span><span class="p">,</span> <span class="n">Table</span>

<span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;MyVoters&#39;</span><span class="p">)</span>

<span class="c1"># Load a table containing VANIDs</span>
<span class="n">tbl</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_csv</span><span class="p">(</span><span class="s1">&#39;gcs_test.csv&#39;</span><span class="p">)</span>

<span class="c1"># The destination folder id. You can get a list of folder ids by running the</span>
<span class="c1"># VAN.get_folders() method. Remember to share the folder with your API user</span>
<span class="c1"># or you will not be able to access it.</span>
<span class="n">folder_id</span> <span class="o">=</span> <span class="mi">1171</span>

<span class="c1"># The destination list name</span>
<span class="n">list_name</span> <span class="o">=</span> <span class="s1">&#39;My Winning List v1.0&#39;</span>

<span class="c1"># The cloud storage service and kwargs specific to GCS.</span>
<span class="n">url_type</span> <span class="o">=</span> <span class="s1">&#39;GCS&#39;</span>
<span class="n">bucket_name</span> <span class="o">=</span> <span class="s1">&#39;my_bucket&#39;</span>
<span class="n">app_creds</span> <span class="o">=</span> <span class="s1">&#39;my_creds.json&#39;</span> <span class="c1"># Not required if stored as env variable.</span>

<span class="n">van</span><span class="o">.</span><span class="n">upload_saved_list</span><span class="p">(</span><span class="n">tbl</span><span class="p">,</span> <span class="n">list_name</span><span class="p">,</span> <span class="n">folder_id</span><span class="p">,</span> <span class="n">url_type</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="n">true</span><span class="p">,</span>
                      <span class="n">bucket_name</span><span class="o">=</span><span class="n">bucket_name</span><span class="p">,</span> <span class="n">app_creds</span><span class="o">=</span><span class="n">app_creds</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="scores-loading-and-updating">
<h3>Scores: Loading and Updating<a class="headerlink" href="#scores-loading-and-updating" title="Link to this heading"></a></h3>
<p>Loading a score is a multi-step process. Once a score is set to approved, loading takes place overnight.</p>
<p><strong>Standard Auto Approve Load</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span><span class="p">,</span> <span class="n">Table</span>

<span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;MyVoters&#39;</span><span class="p">)</span> <span class="c1"># API key stored as an environmental variable</span>

<span class="c1"># If you don&#39;t know the id, you can run van.get_scores() to list the</span>
<span class="c1"># slots that are available and their associated score ids.</span>
<span class="n">score_id</span> <span class="o">=</span> <span class="mi">9999</span>

<span class="c1"># Load the Parsons table with the scores. The first column of the table</span>
<span class="c1"># must be the person id (e.g. VANID). You could create this from Redshift or</span>
<span class="c1"># another source.</span>
<span class="n">tbl</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_csv</span><span class="p">(</span><span class="s1">&#39;winning_scores.csv&#39;</span><span class="p">)</span>

<span class="c1"># Specify the score id slot and the column name for each score.</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;score_id&#39;</span><span class="p">:</span> <span class="n">score_id</span><span class="p">,</span> <span class="s1">&#39;score_column&#39;</span><span class="p">:</span> <span class="s1">&#39;winning_model&#39;</span><span class="p">}]</span>

<span class="c1"># If you have multiple models in the same file, you can load them all at the same time.</span>
<span class="c1"># In fact, VAN recommends that you do so to reduce their server loads.</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;score_id&#39;</span><span class="p">:</span> <span class="mi">5555</span><span class="p">,</span> <span class="s1">&#39;score_column&#39;</span><span class="p">:</span> <span class="s1">&#39;score1&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;score_id&#39;</span><span class="p">:</span> <span class="mi">5556</span><span class="p">,</span> <span class="s1">&#39;score_column&#39;</span><span class="p">:</span> <span class="s1">&#39;score2&#39;</span><span class="p">}]</span>

<span class="c1"># The score file must posted to the internet. This configuration uses S3 to do so. In this</span>
<span class="c1"># example, your S3 keys are stored as environmental variables. If not, you can pass them</span>
<span class="c1"># as arguments.</span>
<span class="n">job_id</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">upload_scores</span><span class="p">(</span><span class="n">tbl</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">url_type</span><span class="o">=</span><span class="s1">&#39;S3&#39;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s1">&#39;info@tmc.org&#39;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s1">&#39;tmc-fake&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Standard Load Requiring Approval</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span>

<span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;MyVoters&#39;</span><span class="p">)</span> <span class="c1"># API key stored as an environmental variable</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;score_id&#39;</span><span class="p">:</span> <span class="mi">3421</span><span class="p">,</span> <span class="s1">&#39;score_column&#39;</span><span class="p">:</span> <span class="s1">&#39;winning_model&#39;</span><span class="p">}]</span>

<span class="c1"># Note that auto_approve is set to False. This means that you need to manually approve</span>
<span class="c1"># the job once it is loaded.</span>
<span class="n">job_id</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">upload_scores</span><span class="p">(</span><span class="n">tbl</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">url_type</span><span class="o">=</span><span class="s1">&#39;S3&#39;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s1">&#39;info@tmc.org&#39;</span><span class="p">,</span>
                           <span class="n">bucket</span><span class="o">=</span><span class="s1">&#39;tmc-fake&#39;</span><span class="p">,</span> <span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Approve the job</span>
<span class="n">van</span><span class="o">.</span><span class="n">update_score_status</span><span class="p">(</span><span class="n">job_id</span><span class="p">,</span><span class="s1">&#39;approved&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="people-add-survey-response">
<h3>People: Add Survey Response<a class="headerlink" href="#people-add-survey-response" title="Link to this heading"></a></h3>
<p>The following workflow can be used to apply survey questions, activist codes
and canvass responses.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span>

<span class="c1"># Instantiate Class</span>
<span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s2">&quot;MyVoters&quot;</span><span class="p">)</span>

<span class="n">van_id</span> <span class="o">=</span> <span class="mi">13242</span>
<span class="n">sq</span> <span class="o">=</span> <span class="mi">311838</span> <span class="c1"># Valid survey question id</span>
<span class="n">sr</span> <span class="o">=</span> <span class="mi">1288926</span> <span class="c1"># Valid survey response id</span>
<span class="n">ct</span> <span class="o">=</span> <span class="mi">36</span> <span class="c1"># Valid contact type id</span>
<span class="n">it</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1"># Valid input type id</span>

<span class="c1"># Create a valid survey question response</span>
<span class="n">van</span><span class="o">.</span><span class="n">apply_survey_response</span><span class="p">(</span><span class="n">vanid</span><span class="p">,</span> <span class="n">sq</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">contact_type_id</span><span class="o">=</span><span class="n">ct</span><span class="p">,</span> <span class="n">input_type_id</span><span class="o">=</span><span class="n">it</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="event-creating-and-modifying">
<h3>Event: Creating and Modifying<a class="headerlink" href="#event-creating-and-modifying" title="Link to this heading"></a></h3>
<p>Events are made up of sub objects that need to exist to create an event</p>
<ul class="simple">
<li><p>Event Object - The event itself</p></li>
<li><p>Event Type - The type of event, such as a <cite>Canvass</cite> or <cite>Phone Bank</cite>. These are created
in the VAN UI and can be reused for multiple events.</p></li>
<li><p>Locations - An event can have multiple locations. While not required to initially create an
event, these are required to add signups to an event.</p></li>
<li><p>Roles - The various roles that a person can have at an event, such as <code class="docutils literal notranslate"><span class="pre">Lead</span></code> or
<code class="docutils literal notranslate"><span class="pre">Canvasser</span></code>. These are set as part of the event type.</p></li>
<li><p>Shifts - Each event can have multiple shits in which a person can be assigned. These are
specified in the event creation.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span>

<span class="c1"># Instantiate class</span>
<span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s2">&quot;EveryAction&quot;</span><span class="p">)</span>

<span class="c1"># Create A Location</span>
<span class="n">loc_id</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">location</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Big `Ol Canvass&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;100 W Washington&#39;</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s1">&#39;Chicago&#39;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;IL&#39;</span><span class="p">)</span>

<span class="c1"># Create Event</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;GOTV Canvass&#39;</span> <span class="c1"># Name of event</span>
<span class="n">short_name</span> <span class="o">=</span> <span class="s1">&#39;GOTVCan&#39;</span> <span class="c1"># Short name of event, 12 chars or less</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="s1">&#39;2018-11-01T15:00:00&#39;</span> <span class="c1"># ISO formatted date</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="s1">&#39;2018-11-01T18:00:00&#39;</span> <span class="c1"># ISO formatted date after start time</span>
<span class="n">event_type_id</span> <span class="o">=</span> <span class="mi">296199</span> <span class="c1"># A valid event type id</span>
<span class="n">roles</span> <span class="o">=</span> <span class="p">[</span><span class="mi">259236</span><span class="p">]</span> <span class="c1"># A list of valid role ids</span>
<span class="n">location_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">loc_id</span><span class="p">]</span> <span class="c1"># An optional list of locations ids for the event</span>
<span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;CPD Super Volunteers Canvass&#39;</span> <span class="c1"># Optional description of 200 chars or less</span>
<span class="n">shifts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Shift 1&#39;</span><span class="p">,</span>
           <span class="s1">&#39;start_time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-11-01T15:00:00&#39;</span><span class="p">,</span>
           <span class="s1">&#39;end_time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-11-11T17:00:00&#39;</span><span class="p">}]</span> <span class="c1"># Shifts must fall within event start/end time.</span>

<span class="n">new_event</span> <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">event_create</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">short_name</span><span class="p">,</span> <span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span><span class="p">,</span> <span class="n">event_type_id</span><span class="p">,</span> <span class="n">roles</span><span class="p">,</span>
                             <span class="n">location_ids</span><span class="o">=</span><span class="n">location_ids</span><span class="p">,</span> <span class="n">shifts</span><span class="o">=</span><span class="n">shifts</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="signup-adding-and-modifying">
<h3>Signup: Adding and Modifying<a class="headerlink" href="#signup-adding-and-modifying" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">VAN</span>

<span class="c1"># Instantiate class</span>
<span class="n">van</span> <span class="o">=</span> <span class="n">VAN</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s2">&quot;EveryAction&quot;</span><span class="p">)</span>

<span class="c1"># Create a new signup</span>

<span class="n">vanid</span> <span class="o">=</span> <span class="mi">100349920</span>
<span class="n">event_id</span> <span class="o">=</span> <span class="mi">750001004</span>
<span class="n">shift_id</span> <span class="o">=</span> <span class="mi">19076</span>
<span class="n">role_id</span> <span class="o">=</span> <span class="mi">263920</span>
<span class="n">location_id</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">role_id</span> <span class="o">=</span> <span class="mi">263920</span>
<span class="n">status_id</span> <span class="o">=</span> <span class="mi">11</span>

<span class="c1"># Create the signup. Will return a signup id</span>
<span class="n">signup_id</span>  <span class="o">=</span> <span class="n">van</span><span class="o">.</span><span class="n">signup_create</span><span class="p">(</span><span class="n">vanid</span><span class="p">,</span> <span class="n">event_id</span><span class="p">,</span> <span class="n">shift_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">,</span> <span class="n">status_id</span><span class="p">,</span> <span class="n">location_id</span>

<span class="c1"># Modify a status of the signup</span>
<span class="n">new_status_id</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">van</span><span class="o">.</span><span class="n">signup_update</span><span class="p">(</span><span class="n">signup_id</span><span class="p">,</span> <span class="n">status_id</span><span class="o">=</span><span class="n">new_status_id</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Link to this heading"></a></h2>
<section id="people">
<h3>People<a class="headerlink" href="#people" title="Link to this heading"></a></h3>
</section>
<section id="activist-codes">
<h3>Activist Codes<a class="headerlink" href="#activist-codes" title="Link to this heading"></a></h3>
</section>
<section id="id1">
<h3>Bulk Import<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
</section>
<section id="canvass-responses">
<h3>Canvass Responses<a class="headerlink" href="#canvass-responses" title="Link to this heading"></a></h3>
</section>
<section id="changed-entities">
<h3>Changed Entities<a class="headerlink" href="#changed-entities" title="Link to this heading"></a></h3>
</section>
<section id="codes">
<h3>Codes<a class="headerlink" href="#codes" title="Link to this heading"></a></h3>
</section>
<section id="contact-notes">
<h3>Contact Notes<a class="headerlink" href="#contact-notes" title="Link to this heading"></a></h3>
</section>
<section id="custom-fields">
<h3>Custom Fields<a class="headerlink" href="#custom-fields" title="Link to this heading"></a></h3>
</section>
<section id="email">
<h3>Email<a class="headerlink" href="#email" title="Link to this heading"></a></h3>
</section>
<section id="events">
<h3>Events<a class="headerlink" href="#events" title="Link to this heading"></a></h3>
</section>
<section id="export-jobs">
<h3>Export Jobs<a class="headerlink" href="#export-jobs" title="Link to this heading"></a></h3>
</section>
<section id="file-loading-jobs">
<h3>File Loading Jobs<a class="headerlink" href="#file-loading-jobs" title="Link to this heading"></a></h3>
</section>
<section id="folders">
<h3>Folders<a class="headerlink" href="#folders" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A folder must be shared with the user associated with your API key to
be listed.</p>
</div>
</section>
<section id="locations">
<h3>Locations<a class="headerlink" href="#locations" title="Link to this heading"></a></h3>
</section>
<section id="printed-lists">
<h3>Printed Lists<a class="headerlink" href="#printed-lists" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A printed list must be shared with the user associated with your API key to
be listed.</p>
</div>
</section>
<section id="saved-lists">
<h3>Saved Lists<a class="headerlink" href="#saved-lists" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A saved list must be shared with the user associated with your API key to
be listed.</p>
</div>
</section>
<section id="scores">
<h3>Scores<a class="headerlink" href="#scores" title="Link to this heading"></a></h3>
<p>Prior to loading a score for the first time, you must contact VAN support to request
a score slot.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>Score Auto Approval</dt><dd><p>Scores can be automatically set to <code class="docutils literal notranslate"><span class="pre">approved</span></code> through the <code class="xref py py-meth docutils literal notranslate"><span class="pre">VAN.upload_scores()</span></code>
method allowing you to skip calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">VAN.update_score_status()</span></code>, if the average of
the scores is within the fault tolerance specified by the user. It is only available
to API keys with permission to automatically approve scores.</p>
</dd>
</dl>
</div>
</section>
<section id="signups">
<h3>Signups<a class="headerlink" href="#signups" title="Link to this heading"></a></h3>
</section>
<section id="supporter-groups">
<h3>Supporter Groups<a class="headerlink" href="#supporter-groups" title="Link to this heading"></a></h3>
</section>
<section id="survey-questions">
<h3>Survey Questions<a class="headerlink" href="#survey-questions" title="Link to this heading"></a></h3>
</section>
<section id="targets">
<h3>Targets<a class="headerlink" href="#targets" title="Link to this heading"></a></h3>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="newmode.html" class="btn btn-neutral float-left" title="New/Mode" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="p2a.html" class="btn btn-neutral float-right" title="Phone2Action" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The Movement Cooperative.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      stable
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Most Common</dt>
        <!-- Show latest & stable first -->
        
            
        
            
        
            
        
            
        
            
        
            
        
            
                  <dd><a href="../latest/ngpvan.html">latest</a></dd>
            
        
            
                  <dd><a href="ngpvan.html">stable</a></dd>
            
        

        <dt>By Version Number</dt>
        <!-- Show other versions -->
        
            
                  <dd><a href="../v0.14.0/ngpvan.html">v0.14.0</a></dd>
            
        
            
                  <dd><a href="../v0.15.0/ngpvan.html">v0.15.0</a></dd>
            
        
            
                  <dd><a href="../v0.16.0/ngpvan.html">v0.16.0</a></dd>
            
        
            
                  <dd><a href="../v0.17.0/ngpvan.html">v0.17.0</a></dd>
            
        
            
                  <dd><a href="../v0.18.0/ngpvan.html">v0.18.0</a></dd>
            
        
            
                  <dd><a href="../v0.18.1/ngpvan.html">v0.18.1</a></dd>
            
        
            
        
            
        

      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>