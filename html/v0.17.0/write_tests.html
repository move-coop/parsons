

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to Write Tests for Parsons Connectors &mdash; Parsons 0.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=db78e746"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="How to Build a Connector" href="build_a_connector.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Parsons
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Integrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="action_kit.html">ActionKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_network.html">Action Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="airtable.html">Airtable</a></li>
<li class="toctree-l1"><a class="reference internal" href="alchemer.html">Alchemer</a></li>
<li class="toctree-l1"><a class="reference internal" href="aws.html">Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.html">Azure: Blob Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="bill_com.html">Bill.com</a></li>
<li class="toctree-l1"><a class="reference internal" href="bloomerang.html">Bloomerang</a></li>
<li class="toctree-l1"><a class="reference internal" href="box.html">Box</a></li>
<li class="toctree-l1"><a class="reference internal" href="braintree.html">Braintree</a></li>
<li class="toctree-l1"><a class="reference internal" href="civis.html">Civis</a></li>
<li class="toctree-l1"><a class="reference internal" href="copper.html">Copper</a></li>
<li class="toctree-l1"><a class="reference internal" href="crowdtangle.html">CrowdTangle</a></li>
<li class="toctree-l1"><a class="reference internal" href="databases.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="facebook_ads.html">FacebookAds</a></li>
<li class="toctree-l1"><a class="reference internal" href="freshdesk.html">Freshdesk</a></li>
<li class="toctree-l1"><a class="reference internal" href="github.html">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="google.html">Google</a></li>
<li class="toctree-l1"><a class="reference internal" href="hustle.html">Hustle</a></li>
<li class="toctree-l1"><a class="reference internal" href="mailchimp.html">Mailchimp</a></li>
<li class="toctree-l1"><a class="reference internal" href="mobilize_america.html">Mobilize America</a></li>
<li class="toctree-l1"><a class="reference internal" href="newmode.html">New/Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="ngpvan.html">NGPVAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdi.html">PDI</a></li>
<li class="toctree-l1"><a class="reference internal" href="p2a.html">Phone2Action</a></li>
<li class="toctree-l1"><a class="reference internal" href="redash.html">Redash</a></li>
<li class="toctree-l1"><a class="reference internal" href="rockthevote.html">Rock the Vote</a></li>
<li class="toctree-l1"><a class="reference internal" href="salesforce.html">Salesforce</a></li>
<li class="toctree-l1"><a class="reference internal" href="sftp.html">SFTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="sisense.html">Sisense</a></li>
<li class="toctree-l1"><a class="reference internal" href="targetsmart.html">TargetSmart</a></li>
<li class="toctree-l1"><a class="reference internal" href="turbovote.html">TurboVote</a></li>
<li class="toctree-l1"><a class="reference internal" href="twilio.html">Twilio</a></li>
<li class="toctree-l1"><a class="reference internal" href="zoom.html">Zoom</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Enhancements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="census_geocoder.html">US Census Geocoder</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Framework</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dbsync.html">Database Sync</a></li>
<li class="toctree-l1"><a class="reference internal" href="table.html">Parsons Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="notifications.html">Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributor Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to Parsons</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_a_connector.html">How to Build a Connector</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to Write Tests for Parsons Connectors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to-write-tests">How to Write Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tests-for-http-api-connectors">Tests for HTTP API Connectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tests-for-connectors-built-on-third-party-libraries">Tests for Connectors Built on Third Party Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#useful-tips">Useful Tips</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Parsons</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">How to Write Tests for Parsons Connectors</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/write_tests.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-write-tests-for-parsons-connectors">
<h1>How to Write Tests for Parsons Connectors<a class="headerlink" href="#how-to-write-tests-for-parsons-connectors" title="Link to this heading"></a></h1>
<section id="how-to-write-tests">
<h2>How to Write Tests<a class="headerlink" href="#how-to-write-tests" title="Link to this heading"></a></h2>
<p>Most of our Parsons Connector classes fall into two categories:</p>
<blockquote>
<div><ul class="simple">
<li><p>Classes that call directly into HTTP API’s using the Parsons <code class="docutils literal notranslate"><span class="pre">APIConnector</span></code> class</p></li>
<li><p>Classes that wrap around third party Python libraries, often using their own “client” class</p></li>
</ul>
</div></blockquote>
<p>The category that the class falls into generally determines how one will write unit tests for the class because the type of Connector determines how we simulate the external API.</p>
<p>No matter which type it is, we are looking to use mocks to simulate the class’ interactions with the external API. Mocks are fake versions of the functions or classes that our Connectors use to access the external API. By using mocks in our tests, we make it easier to set up and run our tests without having to worry about having the proper credentials, etc. that we would need to call into an API.</p>
<section id="getting-started">
<h3>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Add a folder <em>test_yourconnectorname</em> in parsons/test for your connector</p></li>
<li><p>Add a file <em>test_yourconnectorname.py</em> to the <em>test_yourconnectorname</em> folder</p></li>
<li><p>Add at least one <a class="reference external" href="https://en.wikipedia.org/wiki/Happy_path">“Happy Path”</a> test per public method of your connector</p></li>
</ul>
</div></blockquote>
</section>
<section id="tests-for-http-api-connectors">
<h3>Tests for HTTP API Connectors<a class="headerlink" href="#tests-for-http-api-connectors" title="Link to this heading"></a></h3>
<p>For classes built using the <code class="docutils literal notranslate"><span class="pre">APIConnector</span></code> class, we can leverage the <code class="docutils literal notranslate"><span class="pre">requests-mock</span></code> library, since the <code class="docutils literal notranslate"><span class="pre">APIConnector</span></code> uses the <code class="docutils literal notranslate"><span class="pre">requests</span></code> library.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">requests-mock</span></code> library allows us to simulate the API we are calling into by pretending to be an HTTP server. We can create canned responses, and introspect on the endpoints that our Connector called to ensure that the method we are testing is acting the way we expect.</p>
<p>For an example of testing a class built on the <code class="docutils literal notranslate"><span class="pre">APIConnector</span></code>, we can look at the <code class="docutils literal notranslate"><span class="pre">MailChimp</span></code> connector.</p>
<p>In the code below, we have our <code class="docutils literal notranslate"><span class="pre">TestMailchimp</span></code> that serves as our test case. We have one test method to test calls to our <code class="docutils literal notranslate"><span class="pre">get_campaigns</span></code> method in our <code class="docutils literal notranslate"><span class="pre">Mailchimp</span></code> Connector class.</p>
<p>We decorate <code class="docutils literal notranslate"><span class="pre">test_get_campaigns</span></code> with the <code class="docutils literal notranslate"><span class="pre">requests_mock.Mocker</span></code> class, which passes in our requests mocker as an argument <code class="docutils literal notranslate"><span class="pre">m</span></code>. We can then use this mock to configure our mock server.</p>
<p>To configure our mock API, we can make use of the <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">post</span></code>, <code class="docutils literal notranslate"><span class="pre">patch</span></code>, <code class="docutils literal notranslate"><span class="pre">put</span></code>, and <code class="docutils literal notranslate"><span class="pre">delete</span></code> methods on the mock object <code class="docutils literal notranslate"><span class="pre">m</span></code>. These methods mirror the calls we expect our Connector to make to the API. The methods on the mock object correspond to the HTTP method that we are expecting our Connector class to call with, and the first argument to the mock method is the URL that we expect our Connector to call. We can then provide a <code class="docutils literal notranslate"><span class="pre">json</span></code> argument to the mock method to provide a canned response that the mock HTTP server should return.</p>
<p>Below, we will use the <code class="docutils literal notranslate"><span class="pre">get</span></code> method to tell the mock HTTP server that we expect a call to the <code class="docutils literal notranslate"><span class="pre">campaigns</span></code> endpoint of our API, and that the mock HTTP server should return our <a href="#id1"><span class="problematic" id="id2">``</span></a>test_campaigns` canned response.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">TestMailchimp</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="nd">@requests_mock</span><span class="o">.</span><span class="n">Mocker</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_get_campaigns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>

        <span class="n">mc</span> <span class="o">=</span> <span class="n">MailChimp</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span><span class="p">)</span>

        <span class="c1"># Test that campaigns are returned correctly.</span>
        <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mc</span><span class="o">.</span><span class="n">uri</span> <span class="o">+</span> <span class="s1">&#39;campaigns&#39;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">expected_json</span><span class="o">.</span><span class="n">test_campaigns</span><span class="p">)</span>
        <span class="n">tbl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mc</span><span class="o">.</span><span class="n">get_campaigns</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tbl</span><span class="o">.</span><span class="n">num_rows</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>After wiring up the mock HTTP API, we are ready to call the <code class="docutils literal notranslate"><span class="pre">get_campaigns</span></code> method on our <code class="docutils literal notranslate"><span class="pre">Mailchimp</span></code> connector. Since we are using the <code class="docutils literal notranslate"><span class="pre">requests_mock.Mocker</span></code> class, our Connector will not actually hit the Mailchimp API; our call will be intercepted and the configured canned response will be returned.</p>
<p>The Mailchimp tests store the canned responses in a separate Python module, which can help keep the test code separate from the test data, which helps makes tests more readable. The test data is imported from the <code class="docutils literal notranslate"><span class="pre">expected_json.py</span></code> Python file that sits alongside the <code class="docutils literal notranslate"><span class="pre">test_mailchimp.py</span></code> test file.</p>
<p>The data is imported at the top of the <code class="docutils literal notranslate"><span class="pre">test_mailchimp.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">test.test_mailchimp</span><span class="w"> </span><span class="kn">import</span> <span class="n">expected_json</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">expected_json</span></code> can now be used to pull in our canned response variables, as we saw above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mc</span><span class="o">.</span><span class="n">uri</span> <span class="o">+</span> <span class="s1">&#39;campaigns&#39;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">expected_json</span><span class="o">.</span><span class="n">test_campaigns</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="tests-for-connectors-built-on-third-party-libraries">
<h3>Tests for Connectors Built on Third Party Libraries<a class="headerlink" href="#tests-for-connectors-built-on-third-party-libraries" title="Link to this heading"></a></h3>
<p>For classes that wrap third party libraries, we are looking to simulate whatever client object that serves as the Python API for the calls to the external service. To simulate the client object, we can use the <code class="docutils literal notranslate"><span class="pre">unittest.mock.MagicMock</span></code> class from the Python standard library.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">MagicMock</span></code> class allows us to build a fake version of the client object by simulating functionality we expect our Connector class to use – namely by returning canned responses to method calls on the client. As well, the <code class="docutils literal notranslate"><span class="pre">MagicMock</span></code> class is recording those calls as they happen, so that after we have run through our tests, we can check that things happened in the way we expected.</p>
<p>The following gives a simple example of initializing, setting up, and checking expectations on a <code class="docutils literal notranslate"><span class="pre">MagicMock</span></code> class. Please see the following, SalesforceTest example on integrating it with your Connector class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">unittest.mock</span><span class="w"> </span><span class="kn">import</span> <span class="n">MagicMock</span>

<span class="c1"># Initialize a MagicMock object to serve as our fake client</span>
<span class="n">mock_client</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>
<span class="c1"># Tell the client to return a canned list of people from its list_people method</span>
<span class="n">mock_client</span><span class="o">.</span><span class="n">list_people</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Nicole Jackson&#39;</span><span class="p">},</span>
<span class="p">]</span>

<span class="c1"># Your Connector would call the client like normal</span>
<span class="n">people</span> <span class="o">=</span> <span class="n">mock_client</span><span class="o">.</span><span class="n">list_people</span><span class="p">()</span>

<span class="c1"># Check that we got our expected data</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">people</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">people</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>

<span class="c1"># Check that the list_people method was called</span>
<span class="n">mock_client</span><span class="o">.</span><span class="n">list_people</span><span class="o">.</span><span class="n">assert_called</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Salesforce</span></code> class is a good example for writing tests for Connector classes written against a third party library. The <code class="docutils literal notranslate"><span class="pre">Salesforce</span></code> Parsons Connector class wraps around the <code class="docutils literal notranslate"><span class="pre">simple-salesforce</span></code> library’s Salesforce client. When testing the <code class="docutils literal notranslate"><span class="pre">Salesforce</span></code> Parsons class, we will need to swap out its reference to the <code class="docutils literal notranslate"><span class="pre">simple-salesforce</span></code> client with a mock client.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">SalesforceTest</span></code> class, this is done in the <code class="docutils literal notranslate"><span class="pre">setUp</span></code> method of the test class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sf</span> <span class="o">=</span> <span class="n">Salesforce</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sf</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">_client</span></code> attribute on the Salesforce Connector class holds the class’ reference to the underlying third party client object. By overriding it with our <code class="docutils literal notranslate"><span class="pre">MagicMock</span></code> object, the <code class="docutils literal notranslate"><span class="pre">Salesforce</span></code> Parsons class will be calling methods on our mock client instead of an actual simple-salesforce client.</p>
<p>We can then set up our mock client’s <code class="docutils literal notranslate"><span class="pre">query_all</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">sf</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">query_all</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;Id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;FAKE&#39;</span><span class="p">}]</span>
</pre></div>
</div>
<p>Now, we can test our Salesforce Parsons Connector’s query method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Call the query method with a fake value</span>
<span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sf</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;FAKESOQL&#39;</span><span class="p">)</span>
<span class="c1"># Check that our mock client&#39;s query_all method was also called with the fake value</span>
<span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">sf</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">query_all</span><span class="o">.</span><span class="n">called_with</span><span class="p">(</span><span class="s1">&#39;FAKESOQL&#39;</span><span class="p">)</span>
<span class="c1"># Check that the response from our query method is what we expect</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="s1">&#39;FAKE&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the first line, we call the method we are testing (query) with a fake value. In the next line, we check to make sure our mock client’s <code class="docutils literal notranslate"><span class="pre">query_all</span></code> method was called with the same fake value. Finally, we test to make sure that our <code class="docutils literal notranslate"><span class="pre">Salesforce</span></code> Connector returned the expected response, which is based on the return value of the mock client’s <code class="docutils literal notranslate"><span class="pre">query_all</span></code> method (which we set up in the previous block).</p>
<p>That’s pretty much all there is to it. When writing tests for a Connector wrapping a third party library, we will almost always:</p>
<blockquote>
<div><ul class="simple">
<li><p>Create a mock client using the MagicMock class, and wire up the methods that our Connector will need</p></li>
<li><p>Replace the actual third party library’s client on our Connector class with our mock</p></li>
<li><p>Call the method(s) on the Connector that we are looking to test</p></li>
<li><p>Verify the return value of the method calls is what we expect</p></li>
<li><p>Verify that the Connector called the expected methods on our mock client</p></li>
</ul>
</div></blockquote>
</section>
<section id="useful-tips">
<h3>Useful Tips<a class="headerlink" href="#useful-tips" title="Link to this heading"></a></h3>
<p>Parsons has a function <code class="docutils literal notranslate"><span class="pre">assert_matching_tables</span></code> in the <code class="docutils literal notranslate"><span class="pre">parsons.test.utils</span></code> module that can be used to compare two Parsons tables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">parsons</span><span class="w"> </span><span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">test.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">assert_matching_tables</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span>

<span class="c1"># This fails because it actually tests whether a and b are the same instance</span>
<span class="k">assert</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">)</span>

<span class="c1"># But this works</span>
<span class="k">assert</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>

<span class="c1"># And this works</span>
<span class="n">assert_matching_tables</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="build_a_connector.html" class="btn btn-neutral float-left" title="How to Build a Connector" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, The Movement Cooperative.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v0.17.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Most Common</dt>
        <!-- Show latest & stable first -->
        
            
        
            
        
            
        
            
        
            
        
            
        
            
                  <dd><a href="../latest/write_tests.html">latest</a></dd>
            
        
            
                  <dd><a href="../stable/write_tests.html">stable</a></dd>
            
        

        <dt>By Version Number</dt>
        <!-- Show other versions -->
        
            
                  <dd><a href="../v0.14.0/index.html">v0.14.0</a></dd>
            
        
            
                  <dd><a href="../v0.15.0/index.html">v0.15.0</a></dd>
            
        
            
                  <dd><a href="../v0.16.0/index.html">v0.16.0</a></dd>
            
        
            
                  <dd><a href="write_tests.html">v0.17.0</a></dd>
            
        
            
                  <dd><a href="../v0.18.0/write_tests.html">v0.18.0</a></dd>
            
        
            
                  <dd><a href="../v0.18.1/write_tests.html">v0.18.1</a></dd>
            
        
            
        
            
        

      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>